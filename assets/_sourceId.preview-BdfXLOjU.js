import{j as s,S as c,o as t,p as d,ac as l,q as h,a6 as a,u as w,W as A,y as r,ad as B,r as E,m as S,Z as L,L as P,B as R,n as O,ae as G,af as D,ag as H}from"./index-BvppboyF.js";import{I as x,b as o,e as j,c as m,d as f,f as u,g as T}from"./item-K_mgi2KL.js";import{T as K,P as k,a as y,b,c as z}from"./popover-R372aDcc.js";import"./chevron-down-DBj0Q3cI.js";import"./trash-2-DO6FUMcA.js";function M({edge:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function q({edges:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Edges"}),s.jsx(l,{children:"Edges within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(M,{edge:i},i.id))})})})]})}function V({skill:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function W({skills:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Skills"}),s.jsx(l,{children:"Skills within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(V,{skill:i},i.id))})})})]})}function Z({oddements:e,sourceKey:i}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Oddements"}),s.jsx(l,{children:"Oddements within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(p=>s.jsx(J,{oddement:p,sourceKey:i},p.id))})})})]})}function J({oddement:e,sourceKey:i}){const{resolveRefrence:p}=w();return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsx(j,{children:s.jsx(m,{children:e.name})}),s.jsx(u,{children:e.description}),s.jsx(T,{children:e.tags&&e.tags.map(v=>{const g=p(A(i,v),"tags");return g?s.jsx("span",{className:"mr-2 mb-2 inline-block",children:s.jsx(K,{tag:g})},g.id):s.jsx("p",{children:"Tag not Foud"})})})]})})}function Q({fragments:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Fragments"}),s.jsx(l,{children:"Fragments within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(U,{fragment:i},i.id))})})})]})}function U({fragment:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsx(j,{children:s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(r,{variant:"outline",children:e.type})," "]})}),s.jsx(u,{children:e.description})]})})}function X({campingGear:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Camping Gear"}),s.jsx(l,{children:"Camping Gear within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(Y,{campingGear:i},i.id))})})})]})}function Y({campingGear:e}){return s.jsxs(k,{children:[s.jsx(y,{asChild:!0,children:s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.stakes?"Stakes: "+e.stakes:"Free"})]}),s.jsx(u,{children:e.effect})]})})}),s.jsx(b,{children:e.description})]})}function _({aspects:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Aspects"}),s.jsx(l,{children:"Aspects within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx($,{aspect:i},i.id))})})})]})}function $({aspect:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(r,{variant:"outline",children:e.category})]}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function ss({conditions:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Conditions"}),s.jsx(l,{children:"Conditions within the source"})]}),s.jsx(h,{children:s.jsx(a,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(es,{condition:i},i.id))})})})]})}function es({condition:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(r,{variant:"outline",children:e.type})]}),s.jsx(f,{className:"font-semibold",children:s.jsxs("span",{children:["Levels: ",e.levels.length]})})]}),s.jsx(u,{children:e.description}),s.jsxs(T,{className:"justify-around mt-2",children:[e.levels.map(i=>s.jsxs(k,{children:[s.jsx(y,{asChild:!0,children:s.jsxs(r,{className:"cursor-pointer",children:["Level: ",i.level]})}),s.jsx(b,{children:i.description})]},i.level)),s.jsxs(k,{children:[s.jsx(y,{asChild:!0,children:s.jsx(r,{className:"cursor-pointer",children:"Final Moments"})}),s.jsx(b,{children:e.finalMoment})]})]})]})})}function ts(){const{sourceId:e}=B.useParams(),{loadSource:i,isLoading:p,error:v,activeSourceKey:g,sources:F}=w();E.useEffect(()=>{async function N(){const C=await H(e);C&&await i(C.id,C.version)}N()},[e,i]);const n=g?F.get(g):void 0;if(p)return s.jsx(S,{children:"Loading..."});if(v)return s.jsxs(S,{children:["Failed to Find ",e," Error: ",v]});if(!n)return s.jsx(S,{children:"Source not found"});const I=L(n.id,n.version);return s.jsxs(S,{children:[s.jsx(P,{to:"/sources",children:s.jsx(R,{size:"icon",className:"fixed left-5 top-5 z-50","aria-label":"Back to previous page",children:s.jsx(O,{})})}),s.jsxs("header",{className:"p-5 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-4 justify-between -mt-6",children:[s.jsxs("div",{className:"flex gap-2 items-end",children:[s.jsxs("h1",{className:"text-2xl",children:["Preview for ",n.name]}),s.jsx(r,{variant:"outline",children:n.sourceInfo.homebrew?"Homebrew":s.jsxs(s.Fragment,{children:[s.jsx(G,{}),s.jsx("span",{children:"Rules Port"})]})})]}),s.jsxs("div",{className:" flex items-center gap-2",children:[s.jsx("div",{className:"flex *:bg-muted-foreground -space-x-2",children:n.contributors.map(N=>s.jsx(D,{contributor:N},N.id))}),s.jsx(r,{children:n.version})]})]}),s.jsx("p",{className:"whitespace-pre-line align-bottom",children:n.description})]}),s.jsx(a,{className:"h-[75vh] w-full",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:[n.data.edges&&n.data.edges.length>=0&&s.jsx(q,{edges:n.data.edges}),n.data.skills&&n.data.skills.length>=0&&s.jsx(W,{skills:n.data.skills}),n.data.tags&&n.data.tags.length>=0&&s.jsx(z,{tags:n.data.tags}),n.data.oddements&&n.data.oddements.length>=0&&s.jsx(Z,{oddements:n.data.oddements,sourceKey:I}),n.data.fragments&&n.data.fragments.length>=0&&s.jsx(Q,{fragments:n.data.fragments}),n.data.campingGear&&n.data.campingGear.length>=0&&s.jsx(X,{campingGear:n.data.campingGear}),n.data.aspects&&n.data.aspects.length>=0&&s.jsx(_,{aspects:n.data.aspects}),n.data.conditions&&n.data.conditions.length>=0&&s.jsx(ss,{conditions:n.data.conditions})]})})]})}export{ts as component};

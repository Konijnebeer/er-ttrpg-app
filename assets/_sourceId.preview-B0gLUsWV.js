import{j as s,S as c,p as t,q as d,ad as l,s as h,x as i,u as y,Z as A,D as a,ae as E,r as L,n as S,$ as B,L as P,c as R,o as O,af as D,ag as G,ah as H}from"./index-CGdY7LBB.js";import{I as x,b as o,e as j,c as m,d as f,f as u,g as T}from"./item-CH5m8wqO.js";import{T as K,P as k,a as w,b,c as z}from"./popover-CQAuTv-E.js";import"./chevron-down-g1JuUcqf.js";import"./trash-2-B4O9v4yR.js";function M({edge:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function q({edges:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Edges"}),s.jsx(l,{children:"Edges within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(M,{edge:r},r.id))})})})]})}function V({skill:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function Z({skills:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Skills"}),s.jsx(l,{children:"Skills within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(V,{skill:r},r.id))})})})]})}function $({oddements:e,sourceKey:r}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Oddements"}),s.jsx(l,{children:"Oddements within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(p=>s.jsx(J,{oddement:p,sourceKey:r},p.id))})})})]})}function J({oddement:e,sourceKey:r}){const{resolveRefrence:p}=y();return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsx(j,{children:s.jsx(m,{children:e.name})}),s.jsx(u,{children:e.description}),s.jsx(T,{children:e.tags&&e.tags.map(v=>{const g=p(A(r,v),"tags");return g?s.jsx("span",{className:"mr-2 mb-2 inline-block",children:s.jsx(K,{tag:g})},g.id):s.jsx("p",{children:"Tag not Foud"})})})]})})}function Q({fragments:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Fragments"}),s.jsx(l,{children:"Fragments within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(U,{fragment:r},r.id))})})})]})}function U({fragment:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsx(j,{children:s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(a,{variant:"outline",children:e.type})," "]})}),s.jsx(u,{children:e.description})]})})}function W({campingGear:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Camping Gear"}),s.jsx(l,{children:"Camping Gear within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(X,{campingGear:r},r.id))})})})]})}function X({campingGear:e}){return s.jsxs(k,{children:[s.jsx(w,{asChild:!0,children:s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsx(m,{children:e.name}),s.jsx(f,{className:"font-semibold",children:e.stakes?"Stakes: "+e.stakes:"Free"})]}),s.jsx(u,{children:e.effect})]})})}),s.jsx(b,{children:e.description})]})}function Y({aspects:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Aspects"}),s.jsx(l,{children:"Aspects within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(_,{aspect:r},r.id))})})})]})}function _({aspect:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(a,{variant:"outline",children:e.category})]}),s.jsx(f,{className:"font-semibold",children:e.maxTrack&&s.jsxs("span",{children:["Tracks: ",e.maxTrack]})})]}),s.jsx(u,{children:e.description})]})})}function ss({conditions:e}){return s.jsxs(c,{children:[s.jsxs(t,{children:[s.jsx(d,{children:"Conditions"}),s.jsx(l,{children:"Conditions within the source"})]}),s.jsx(h,{children:s.jsx(i,{className:"h-[30vh] h-max-[40vh]",children:s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsx(es,{condition:r},r.id))})})})]})}function es({condition:e}){return s.jsx(x,{variant:"outline",children:s.jsxs(o,{children:[s.jsxs(j,{children:[s.jsxs(m,{children:[s.jsx("span",{children:e.name}),s.jsx(a,{variant:"outline",children:e.type})]}),s.jsx(f,{className:"font-semibold",children:s.jsxs("span",{children:["Levels: ",e.levels.length]})})]}),s.jsx(u,{children:e.description}),s.jsxs(T,{className:"justify-around mt-2",children:[e.levels.map(r=>s.jsxs(k,{children:[s.jsx(w,{asChild:!0,children:s.jsxs(a,{className:"cursor-pointer",children:["Level: ",r.level]})}),s.jsx(b,{children:r.description})]},r.level)),s.jsxs(k,{children:[s.jsx(w,{asChild:!0,children:s.jsx(a,{className:"cursor-pointer",children:"Final Moments"})}),s.jsx(b,{children:e.finalMoment})]})]})]})})}function ts(){const{sourceId:e}=E.useParams(),{loadSource:r,isLoading:p,error:v,activeSourceKey:g,sources:F}=y();L.useEffect(()=>{async function N(){const C=await H(e);C&&await r(C.id,C.version)}N()},[e,r]);const n=g?F.get(g):void 0;if(p)return s.jsx(S,{children:"Loading..."});if(v)return s.jsxs(S,{children:["Failed to Find ",e," Error: ",v]});if(!n)return s.jsx(S,{children:"Source not found"});const I=B(n.id,n.version);return s.jsxs(S,{children:[s.jsx(P,{to:"/sources",children:s.jsx(R,{size:"icon",className:"fixed left-5 top-5 z-50","aria-label":"Back to previous page",children:s.jsx(O,{})})}),s.jsxs("header",{className:" flex flex-col gap-2",children:[s.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 justify-between",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 flex-start md:items-center",children:[s.jsxs("h1",{className:"text-2xl",children:["Preview for ",n.name]}),s.jsx(a,{variant:"outline",children:n.sourceInfo.homebrew?"Homebrew":s.jsxs(s.Fragment,{children:[s.jsx(D,{}),s.jsx("span",{children:"Rules Port"})]})})]}),s.jsxs("div",{className:" flex items-center gap-2",children:[s.jsx("div",{className:"flex *:bg-muted-foreground -space-x-2",children:n.contributors.map(N=>s.jsx(G,{contributor:N},N.id))}),s.jsx(a,{children:n.version})]})]}),s.jsx("p",{className:"whitespace-pre-line align-bottom",children:n.description})]}),s.jsx(i,{className:"h-[75vh] w-full",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:[n.data.edges&&n.data.edges.length>=0&&s.jsx(q,{edges:n.data.edges}),n.data.skills&&n.data.skills.length>=0&&s.jsx(Z,{skills:n.data.skills}),n.data.tags&&n.data.tags.length>=0&&s.jsx(z,{tags:n.data.tags}),n.data.oddements&&n.data.oddements.length>=0&&s.jsx($,{oddements:n.data.oddements,sourceKey:I}),n.data.fragments&&n.data.fragments.length>=0&&s.jsx(Q,{fragments:n.data.fragments}),n.data.campingGear&&n.data.campingGear.length>=0&&s.jsx(W,{campingGear:n.data.campingGear}),n.data.aspects&&n.data.aspects.length>=0&&s.jsx(Y,{aspects:n.data.aspects}),n.data.conditions&&n.data.conditions.length>=0&&s.jsx(ss,{conditions:n.data.conditions})]})})]})}export{ts as component};
